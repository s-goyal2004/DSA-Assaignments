 // detect_cycle_hashset.cpp
 #include <bits/stdc++.h>
 using namespace std;
 struct ListNode {
    int val;
 ListNode* next;
 ListNode(int v): val(v), next(nullptr) {}
 };
 // Using hash set of pointers
 bool hasCycle(ListNode* head) {
 unordered_set<ListNode*> seen;
    for (ListNode* cur = head; cur; cur = cur->next) {
        if (seen.count(cur)) return true;
seen.insert(cur);
    }
    return false;
 }
 int main() {
    // Example 1->2->3->4->(back to 2)
 ListNode* n1 = new ListNode(1);
 ListNode* n2 = new ListNode(2);
 ListNode* n3 = new ListNode(3);
 ListNode* n4 = new ListNode(4);
    n1->next = n2; n2->next = n3; n3->next = n4; n4->next = n2; // cycle
 cout << (hasCycle(n1) ? "true\n" : "false\n");

    return 0;
 }